<% content_for :header_tags do %>
  <%= stylesheet_link_tag 'tags.css', :plugin => 'redmine_issue_tags' %>
<% end %>

<div id="tags-wrapper">

  <% if User.current.allowed_to_private_tags?(@project) %>

    <% private_tags = if @project
                        @project.private_tags.limit(50).pluck(:id, :name)
                      else
                        User.current.owned_private_tags.limit(50).pluck(:id, :name)
                      end %>

    <%= render 'issues/private_tags', private_tags: private_tags %>

  <% end %>

  <% if @project && User.current.allowed_to?(:view_public_tags, @project) %>

    <% public_tags = @project.public_tags.limit(50).pluck(:id, :name, :taggings_count) %>

    <%= render 'issues/public_tags', public_tags: public_tags %>

  <% elsif (public_tags = User.current.globally_allowed_public_tags.limit(50).pluck(:id, :name, :taggings_count)) %>

    <%= render 'issues/public_tags', public_tags: public_tags %>

  <% end %>

</div>
